<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Panel</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<header>
    <h1>ğŸ” Admin Panel</h1>
</header>

<div class="container">

<div id="loginPanel">
    <input type="text" id="username" placeholder="Ä°stifadÉ™Ã§i adÄ±">
    <input type="password" id="password" placeholder="ÅifrÉ™">
    <button onclick="login()">Daxil ol</button>
    <p id="error"></p>
</div>

<div id="adminPanel" style="display:none;">
    <h2>â• Yeni Elan</h2>
    <input type="text" id="title" placeholder="BaÅŸlÄ±q">
    <textarea id="content" placeholder="MÉ™tn"></textarea>
    <input type="file" id="image">
    <button onclick="addAnnouncement()">ÆlavÉ™ et</button>

    <h3>ğŸ“Š Statistik</h3>
    <div id="stats"></div>

    <h3>ğŸ—‘ Elanlar</h3>
    <div id="list"></div>
</div>

</div>

<script>
function login(){
    if(username.value==="admin" && password.value==="123"){
        loginPanel.style.display="none";
        adminPanel.style.display="block";
        loadAdmin();
    } else {
        error.innerText="âŒ YanlÄ±ÅŸ mÉ™lumat!";
    }
}

function addAnnouncement(){
    let reader=new FileReader();
    let file=image.files[0];

    if(file){
        reader.onload=function(){
            saveAnnouncement(reader.result);
        }
        reader.readAsDataURL(file);
    }else{
        saveAnnouncement("");
    }
}

function saveAnnouncement(img){
    let data=JSON.parse(localStorage.getItem("announcements"))||[];

    data.push({
        title:title.value,
        content:content.value,
        image:img,
        date:new Date().toLocaleString(),
        comments:[]
    });

    localStorage.setItem("announcements",JSON.stringify(data));
    alert("âœ… Elan É™lavÉ™ edildi!");
    loadAdmin();
}

function loadAdmin(){
    let data=JSON.parse(localStorage.getItem("announcements"))||[];
    let list=document.getElementById("list");
    let stats=document.getElementById("stats");

    list.innerHTML="";
    let totalComments=0;

    data.forEach((item,index)=>{
        totalComments+=item.comments.length;

        let div=document.createElement("div");
        div.className="card";
        div.innerHTML=`
            ${item.title}
            <button onclick="deleteAnnouncement(${index})">Sil</button>
        `;
        list.appendChild(div);
    });

    stats.innerHTML=`
        ğŸ“¢ Elan sayÄ±: ${data.length} <br>
        ğŸ’¬ ÅÉ™rh sayÄ±: ${totalComments}
    `;
}

function deleteAnnouncement(index){
    let data=JSON.parse(localStorage.getItem("announcements"))||[];
    data.splice(index,1);
    localStorage.setItem("announcements",JSON.stringify(data));
    loadAdmin();
}
</script>

</body>
</html>
