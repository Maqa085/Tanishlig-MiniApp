<!DOCTYPE html>
<html lang="az">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Tanƒ±≈ülƒ±q Botu</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --main-yellow: #f5c518; --bg-dark: #000; --card-bg: #111; }
        body { font-family: sans-serif; background: var(--bg-dark); color: white; margin: 0; overflow: hidden; }
        .page { display: none; height: 100vh; padding: 20px; box-sizing: border-box; overflow-y: auto; }
        .active { display: block; }

        /* Profil Kartƒ± Stil */
        .profile-header-card { background: var(--card-bg); border-radius: 20px; padding: 15px; display: flex; align-items: center; gap: 15px; margin-bottom: 20px; border: 1px solid #222; }
        .profile-header-card img { width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--main-yellow); }
        .stat-badge { background: #1a1a1a; padding: 5px 10px; border-radius: 10px; font-size: 12px; display: inline-flex; align-items: center; gap: 5px; margin-top: 5px; }

        /* Mesaj Yazma √áubuƒüu (≈û…ôkild…ôki kimi) */
        .chat-container { display: flex; flex-direction: column; height: 80vh; }
        .messages-area { flex: 1; overflow-y: auto; padding: 10px; }
        .chat-input-area { position: fixed; bottom: 80px; left: 5%; width: 90%; background: #1a1a1a; border-radius: 30px; display: flex; align-items: center; padding: 5px 15px; border: 1px solid #333; }
        .chat-input-area input { flex: 1; background: transparent; border: none; color: white; padding: 12px; outline: none; font-size: 15px; }
        .send-btn { background: var(--main-yellow); color: black; width: 40px; height: 40px; border-radius: 50%; border: none; display: flex; justify-content: center; align-items: center; cursor: pointer; }

        /* Navigasiya */
        .bottom-nav { position: fixed; bottom: 0; width: 100%; display: flex; background: #0a0a0a; padding: 15px 0; border-top: 1px solid #222; }
        .nav-item { flex: 1; text-align: center; color: #555; font-size: 11px; }
        .nav-item.active { color: var(--main-yellow); }
        .nav-item i { display: block; font-size: 20px; }

        /* Kristal Al S…ôhif…ôsi */
        #stars-page { text-align: center; }
        .stars-input { background: #1a1a1a; border: 1px solid var(--main-yellow); color: white; padding: 15px; border-radius: 15px; width: 80%; font-size: 18px; margin: 20px 0; }
        .main-btn { background: var(--main-yellow); color: black; border: none; padding: 15px; border-radius: 15px; width: 100%; font-weight: bold; font-size: 16px; }
    </style>
</head>
<body>

    <div id="home" class="page active">
        <h2 style="color: var(--main-yellow);">üìú Qaydalar</h2>
        <p>1. Etik qaydalara riay…ôt edin.</p>
        <p>2. Mesaj g√∂nd…ôrm…ôk 1 üíé t…ôl…ôb edir.</p>
        <p>3. Stars vasit…ôsil…ô kristal ala bil…ôrsiniz.</p>
    </div>

    <div id="discover" class="page">
        <div id="user-card" style="background: var(--card-bg); border-radius: 20px; overflow: hidden;">
            <img id="disc-photo" src="https://via.placeholder.com/400x400" style="width:100%;">
            <div style="padding:15px;">
                <h3 id="disc-name">Y√ºklenir...</h3>
                <p id="disc-bio" style="color:#888;"></p>
                <div style="display:flex; gap:10px;">
                    <button class="main-btn" onclick="nextUser()" style="background:#333; color:white;">‚è≠Ô∏è Ke√ß</button>
                    <button class="main-btn" onclick="sendAction('like')">‚ù§Ô∏è‚Äçüî• B…ôy…ôn</button>
                    <button class="main-btn" onclick="openChatView()" style="background:#0088cc; color:white;">üí¨ Mesaj</button>
                </div>
            </div>
        </div>
    </div>

    <div id="chat" class="page" style="padding:0;">
        <div style="background:#111; padding:15px; display:flex; align-items:center; gap:10px; border-bottom:1px solid #222;">
            <img id="chat-user-img" src="https://via.placeholder.com/40" style="border-radius:50%;">
            <b id="chat-user-name">S√∂hb…ôt</b>
        </div>
        <div class="messages-area" id="msg-box">
            <p style="text-align:center; color:#555; margin-top:20px;">S√∂hb…ôt…ô ba≈ülamaq √º√ß√ºn mesaj yazƒ±n...</p>
        </div>
        <div class="chat-input-area">
            <i class="far fa-smile" style="color:#555;"></i>
            <input type="text" id="chat-input" placeholder="Mesaj yazƒ±n...">
            <button class="send-btn" onclick="sendMessage()"><i class="fas fa-paper-plane"></i></button>
        </div>
    </div>

    <div id="profile" class="page">
        <div class="profile-header-card">
            <img id="my-photo" src="">
            <div class="user-info">
                <h2 id="my-name">MAGA</h2>
                <p id="my-id">ID: </p>
                <div class="stat-badge"><i class="fas fa-gem" style="color:var(--main-yellow)"></i> <span id="my-crystals">5</span></div>
            </div>
        </div>
        <button class="main-btn" onclick="openStars()">üíé Kristal Al (Stars ‚≠ê)</button>
    </div>

    <div id="stars-page" class="page">
        <h3 style="color:var(--main-yellow)">üíé Kristal Al</h3>
        <p>10 Kristal = 100 Stars ‚≠ê</p>
        <input type="number" id="stars-amount" class="stars-input" placeholder="Miqdar (m…ôs: 10)">
        <button class="main-btn" onclick="buyStars()">Al</button>
        <p onclick="showPage('profile')" style="margin-top:20px; color:#555;">Geri qayƒ±t</p>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="showPage('home', this)"><i class="fas fa-home"></i>Ana S…ôhif…ô</div>
        <div class="nav-item" onclick="showPage('chat', this)"><i class="fas fa-comment"></i>Chat</div>
        <div class="nav-item" onclick="showPage('discover', this)"><i class="fas fa-fire"></i>Tanƒ±≈ü Ol</div>
        <div class="nav-item" onclick="showPage('profile', this)"><i class="fas fa-user-circle"></i>Profil</div>
    </div>

    <script>
        let tg = window.Telegram.WebApp;
        tg.expand();
        let currentTargetId = null;

        // Telegramdan istifad…ô√ßi m…ôlumatlarƒ±
        const user = tg.initDataUnsafe.user;
        if(user) {
            document.getElementById('my-name').innerText = user.first_name;
            document.getElementById('my-id').innerText = "ID: " + user.id;
            document.getElementById('my-photo').src = user.photo_url || 'https://via.placeholder.com/80';
        }

        function showPage(id, el) {
            document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
            document.getElementById(id).classList.add('active');
            if(el) {
                document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
                el.classList.add('active');
            }
        }

        function sendMessage() {
            let text = document.getElementById('chat-input').value;
            if(text.trim() != "") {
                // Bota g√∂nd…ôr
                tg.sendData(JSON.stringify({
                    action: "send_msg",
                    text: text,
                    to_id: currentTargetId || "8055987590" // N√ºmun…ô ID
                }));
                document.getElementById('chat-input').value = "";
                tg.close(); // Telegram m…ôhdudiyy…ôtin…ô g√∂r…ô sendData sonrasƒ± baƒülanƒ±r
            }
        }

        function openStars() { showPage('stars-page'); }

        function buyStars() {
            let qty = document.getElementById('stars-amount').value;
            tg.sendData(JSON.stringify({action: "buy_stars", amount: qty}));
        }

        function openChatView() { showPage('chat'); }
    </script>
</body>
                        </html>
                                      
