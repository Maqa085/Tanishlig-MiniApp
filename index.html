<!DOCTYPE html>
<html lang="az">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MÉ™ktÉ™b PlatformasÄ±</title>
<link rel="stylesheet" href="style.css">
</head>

<body>

<div class="toggle" onclick="toggleMode()">ğŸŒ™</div>

<header>
    <h1>ğŸ« Mavi AÄŸ MÉ™ktÉ™b</h1>
    <p>ğŸ“š TÉ™hsil GÉ™lÉ™cÉ™yimizdir</p>
</header>

<nav>
    <a href="index.html">ğŸ  Ana sÉ™hifÉ™</a>
    <a href="admin.html">ğŸ” Admin</a>
</nav>

<div class="container">
    <h2>ğŸ“¢ Elanlar</h2>
    <div id="announcements"></div>
</div>

<script>
function toggleMode(){
    document.body.classList.toggle("dark");
}

function loadAnnouncements(){
    let data=JSON.parse(localStorage.getItem("announcements"))||[];
    let container=document.getElementById("announcements");
    container.innerHTML="";

    let totalComments=0;

    data.forEach((item,index)=>{
        totalComments+=item.comments.length;

        let div=document.createElement("div");
        div.className="card";
        div.innerHTML=`
            <h3>ğŸ“Œ ${item.title}</h3>
            <p>${item.content}</p>
            ${item.image ? `<img src="${item.image}">` : ""}
            <small>ğŸ•’ ${item.date}</small>
            <h4>ğŸ’¬ ÅÉ™rhlÉ™r</h4>
            <div id="comments-${index}">
                ${item.comments.map(c=>`<div class="comment">${c}</div>`).join("")}
            </div>
            <input type="text" id="commentInput-${index}" placeholder="ÅÉ™rh yaz...">
            <button onclick="addComment(${index})">GÃ¶ndÉ™r</button>
        `;
        container.appendChild(div);
    });

    let stats=document.createElement("div");
    stats.className="stats";
    stats.innerHTML=`
        <div class="statBox">ğŸ“¢ Elan sayÄ±: ${data.length}</div>
        <div class="statBox">ğŸ’¬ ÅÉ™rh sayÄ±: ${totalComments}</div>
    `;
    container.prepend(stats);
}

function addComment(index){
    let data=JSON.parse(localStorage.getItem("announcements"))||[];
    let input=document.getElementById("commentInput-"+index);
    if(input.value==="") return;

    data[index].comments.push(input.value);
    localStorage.setItem("announcements",JSON.stringify(data));
    loadAnnouncements();
}

loadAnnouncements();
</script>

</body>
</html>
